stdout:
  versions: [ "draft-2" ]
  description: |
    Standard Lib: Basic test for stdout()
  inputs:
    wdl: standard_library/basic_stdout.wdl
    json: standard_library/basic_stdout.json
  outputs:
    stdoutWorkflow.get_stdout.check_this:
      type: "File"
      value: {md5sum: "91d69f7c47b6e7d5e4d81fab67f7f304"}

stderr:
  versions: [ "draft-2" ]
  description: |
    Standard Lib: Basic test for stderr()
  inputs:
    wdl: standard_library/basic_stderr.wdl
    json: standard_library/basic_stderr.json
  outputs:
    stderrWorkflow.get_stderr.check_this:
      type: "File"
      value: {md5sum: "2332021c3feef276abe077f34276abfe"}

quote:
  versions: [ "1.1" ]
  description: |
    Standard Lib: Basic test for quote()
  inputs:
    wdl: standard_library/basic_quote.wdl
    json: standard_library/basic_quote.json
  outputs:
    quoteWorkflow.str_output:
      value: [ '"value1"', '"value2"', '"value3"' ]
      type: "Array[String]"
    quoteWorkflow.int_output:
      value: [ '"1"', '"2"', '"-3"' ]
      type: "Array[String]"
    quoteWorkflow.float_output:
      value: [ '"1.234000"', '"-0.543000"', '"-13.300000"' ]
      type: "Array[String]"
    quoteWorkflow.bool_output:
      value: [ '"true"', '"false"', '"true"' ]
      type: "Array[String]"
    quoteWorkflow.file_output:
      value: [ '"${WDL_DIR}/tests/version_1.1/standard_library/basic_quote.wdl"', '"${WDL_DIR}/tests/version_1.1/standard_library/basic_quote.json"', '"${WDL_DIR}/run.py"' ] # files are relative path to input files, cannot go up in subdir, ex with run.py
      type: "Array[String]"

squote:
  versions: [ "1.1" ]
  description: |
    Standard Lib: Basic test for squote()
  inputs:
    wdl: standard_library/basic_squote.wdl
    json: standard_library/basic_squote.json
  outputs:
    squoteWorkflow.str_output:
      value: [ "'value1'", "'value2'", "'value3'" ]
      type: "Array[String]"
    squoteWorkflow.int_output:
      value: [ "'1'", "'2'", "'-3'" ]
      type: "Array[String]"
    squoteWorkflow.float_output:
      value: [ "'1.234000'", "'-0.543000'", "'-13.300000'" ]
      type: "Array[String]"
    squoteWorkflow.bool_output:
      value: [ "'true'", "'false'", "'true'" ]
      type: "Array[String]"
    squoteWorkflow.file_output:
      value: [ "'${WDL_DIR}/tests/version_1.1/standard_library/basic_quote.wdl'", "'${WDL_DIR}/tests/version_1.1/standard_library/basic_quote.json'", "'${WDL_DIR}/run.py'" ]
      type: "Array[String]"

sep:
  versions: [ "1.1" ]
  description: |
    Standard Lib: Basic test for sep()
  inputs:
    wdl: standard_library/basic_sep.wdl
    json: standard_library/basic_sep.json
  outputs:
    sepWorkflow.str_output:
      value: "a - b - c"
      type: "String"

prefix:
  versions: [ "1.0", "draft-2", "1.1" ]
  description: |
    Standard Lib: Basic test for prefix()
  inputs:
    wdl: standard_library/basic_prefix.wdl
    json: standard_library/basic_prefix.json
  outputs:
    prefixWorkflow.str_output:
      value: [ "-e value1", "-e value2", "-e value3" ]
      type: "Array[String]"

select_first:
  versions: [ "draft-2", "1.0", "1.1" ]
  description: |
    Standard Lib: Basic test for select_first()
  inputs:
    wdl: standard_library/basic_select_first.wdl
    json: standard_library/basic_select_first.json
  outputs:
    selectFirstWorkflow.int_output:
      value: 5
      type: "Int"
    selectFirstWorkflow.str_output:
      type: "String"
      value: "value1"
    selectFirstWorkflow.bool_output:
      type: "Boolean"
      value: true
    selectFirstWorkflow.float_output:
      type: "Float"
      value: 999.9999999
    selectFirstWorkflow.file_output:
      value: { md5sum: "337cf995cbd86664d941095a45e5e75d" }
      type: "File"

select_all:
  versions: [ "draft-2", "1.0", "1.1" ]
  description: |
    Standard Lib: Basic test for select_all()
  inputs:
    wdl: standard_library/basic_select_all.wdl
    json: standard_library/basic_select_all.json
  outputs:
    selectAllWorkflow.int_output:
      type: "Array[Int]"
      value: [ 4, 5 ]
    selectAllWorkflow.float_output:
      type: "Array[Float]"
      value: [ 1.2345 ]
    selectAllWorkflow.str_output:
      type: "Array[String]"
      value: [ "value1", "value3" ]
    selectAllWorkflow.bool_output:
      type: "Array[Boolean]"
      value: [ true, false ]
    selectAllWorkflow.file_output:
      type: "Array[File]"
      value: [ {md5sum: "c4b90e142a9ba0270f8137244caa246c"} ]

suffix:
  versions: [ "1.1" ]
  description: |
    Standard Lib: Basic test for suffix()
  inputs:
    wdl: standard_library/basic_suffix.wdl
    json: standard_library/basic_suffix.json
  outputs:
    suffixWorkflow.str_output:
      value: [ "value1.txt", "value2.txt", "value3.txt" ]
      type: "Array[String]"

defined:
  versions: [ "draft-2", "1.0", "1.1" ]
  description: |
    Standard Lib: Basic test for defined()
  inputs:
    wdl: standard_library/basic_defined.wdl
    json: standard_library/basic_defined.json
  outputs:
    definedWorkflow.bool_output:
      value: true
      type: "Boolean"
    definedWorkflow.bool_output_none:
      value: false
      type: "Boolean"

basename:
  versions: [ "draft-2", "1.0", "1.1" ]
  description: |
    Standard Lib: Basic test for basename()
  inputs:
    wdl: standard_library/basic_basename.wdl
    json: standard_library/basic_basename.json
  outputs:
    basenameWorkflow.str_output:
      type: "String"
      value: "file.txt"
    basenameWorkflow.str_output_removed:
      type: "String"
      value: "file"
    basenameWorkflow.str_output_file:
      type: "String"
      value: "basic_basename.json"
    basenameWorkflow.str_output_file_removed:
      type: "String"
      value: "basic_basename"

fail:
  versions: [ "1.1", "1.0" ]
  description: |
    Basic failure test, with invalid arguments
  inputs:
    wdl: standard_library/basic_fail.wdl
    json: standard_library/basic_fail.json
  outputs:
    fail: 2

#fake_fail:
#  versions: [ "1.1", "1.0" ]
#  description: |
#    test case, wdl workflow fail but expected output is not
#    this test should fail
#  inputs:
#    wdl: standard_library/basic_fake_fail.wdl
#    json: standard_library/basic_fake_fail.json
#  outputs:
#    fakeFailWorkflow.str_output:
#      type: "Array[String]"
#      value: [ "'2'" ]

pair:
  versions: [ "1.1" ]
  description: |
    Basic test for compound type pair
  inputs:
    wdl: semantics/basic_pair.wdl
    json: semantics/basic_pair.json
  outputs:
    pairWorkflow.pair_output:
      type: "Pair[Int, Int]"
      value: { left: 2, right: 4 }

map:
  versions: [ "1.1" ]
  description: |
    Basic test for compound type map
  inputs:
    wdl: semantics/basic_map.wdl
    json: semantics/basic_map.json
  outputs:
    mapWorkflow.map_output:
      type: "Map[Int, Int]"
      value: { "1": 2, "3": 4 } # keys must be string


array_pair:
  versions: [ "1.1" ]
  description: |
    Basic test for compound type array of pair
  inputs:
    wdl: semantics/basic_array_pair.wdl
    json: semantics/basic_array_pair.json
  outputs:
    arrayPairWorkflow.pair_output:
      type: "Array[Pair[Int,Int]]"
      value: [ { left: 2, right: 4 } ]

object:
  versions: [ "1.0" ]
  description: |
    Basic object test
  inputs:
    wdl: semantics/basic_object.wdl
    json: semantics/basic_object.json
  outputs:
    objectWorkflow.obj_output:
      value: { "b": "hello", "a": 10 }
      type: "Object"

struct:
  versions: [ "1.1", "1.0" ]
  description: |
    Basic struct test
  inputs:
    wdl: semantics/basic_struct.wdl
    json: semantics/basic_struct.json
  outputs:
    structWorkflow.struct_output:
      type: "Struct{sample_string: String, sample_index: Int}"
      value: { "sample_string": "hello", "sample_index": 10 }
